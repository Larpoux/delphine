var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// src/vcl/StdCtrls.ts
var TColor = class _TColor {
  constructor(s) {
    __publicField(this, "s");
    this.s = s;
  }
  /* factory */
  static rgb(r, g, b) {
    return new _TColor(`rgb(${r}, ${g}, ${b})`);
  }
  /* factory */
  static rgba(r, g, b, a) {
    return new _TColor(`rgba(${r}, ${g}, ${b}, ${a})`);
  }
};
var ComponentRegistry = class {
  constructor() {
    __publicField(this, "byName", /* @__PURE__ */ new Map());
  }
  register(name, c) {
    this.byName.set(name, c);
  }
  get(name) {
    return this.byName.get(name);
  }
  clear() {
    this.byName.clear();
  }
  resolveRoot() {
    if (document.body?.dataset?.component) return document.body;
    const legacy = document.getElementById("delphine-root");
    if (legacy) return legacy;
    return document.body ?? document.documentElement;
  }
  buildComponentTree(form) {
    this.clear();
    this.register(form.name, form);
    const root = form.elem;
    root.querySelectorAll("[data-component]").forEach((el) => {
      if (el === root) return;
      const name = el.getAttribute("data-name");
      const type = el.getAttribute("data-component");
      const titi = el.getAttribute("data-onclick");
      console.log(`titi = ${titi}`);
      let comp = null;
      switch (type) {
        case "my-button":
          comp = new TButton(name, form, form);
          break;
        case "delphine-plugin":
          break;
        default:
          break;
      }
      if (comp) {
        comp.elem = el;
        this.register(name, comp);
      }
    });
    form.addEventListener("click");
  }
};
var TComponent = class {
  constructor(name, parent, form) {
    __publicField(this, "parent", null);
    __publicField(this, "form", null);
    __publicField(this, "children", []);
    __publicField(this, "elem", null);
    __publicField(this, "name");
    this.name = name;
    this.parent = parent;
    parent?.children.push(this);
    this.form = form;
    this.name = name;
  }
  get htmlElement() {
    return this.elem;
  }
  get color() {
    return new TColor(this.getStyleProp("color"));
  }
  set color(v) {
    this.setStyleProp("color", v.s);
  }
  get backgroundColor() {
    return new TColor(this.getStyleProp("background-color"));
  }
  set backgroundColor(v) {
    this.setStyleProp("background-color", v.s);
  }
  get width() {
    return parseInt(this.getStyleProp("width"));
  }
  set width(v) {
    this.setStyleProp("width", v.toString());
  }
  get height() {
    return parseInt(this.getStyleProp("height"));
  }
  set height(v) {
    this.setStyleProp("height", v.toString());
  }
  get offsetWidth() {
    return this.htmlElement.offsetWidth;
  }
  get offsetHeight() {
    return this.htmlElement.offsetHeight;
  }
  setStyleProp(name, value) {
    this.htmlElement.style.setProperty(name, value);
  }
  getStyleProp(name) {
    return this.htmlElement.style.getPropertyValue(name);
  }
  setProp(name, value) {
    this.htmlElement.setAttribute(name, value);
  }
  getProp(name) {
    return this.htmlElement.getAttribute(name);
  }
};
var _TDocument = class _TDocument {
  constructor(htmlDoc) {
    __publicField(this, "htmlDoc");
    this.htmlDoc = htmlDoc;
  }
};
__publicField(_TDocument, "document", new _TDocument(document));
__publicField(_TDocument, "body", document.body);
var TDocument = _TDocument;
var _TForm = class _TForm extends TComponent {
  constructor(name) {
    super(name, null, null);
    __publicField(this, "_mounted", false);
    __publicField(this, "componentRegistry", new ComponentRegistry());
    this.form = this;
    _TForm.forms.set(name, this);
  }
  /*        findFormFromEventTarget(currentTargetElem: Element): TForm | null {
          const formName = currentTargetElem.getAttribute('data-name');
          const form: TForm = TForm.forms.get(formName!)!;
          return form;
  }
          */
  // English comments as requested.
  findFormFromEventTarget(target) {
    const formElem = target.closest('[data-component="TForm"][data-name]');
    if (!formElem) return null;
    const formName = formElem.getAttribute("data-name");
    if (!formName) return null;
    return _TForm.forms.get(formName) ?? null;
  }
  show() {
    if (!this.elem) {
      this.elem = this.componentRegistry.resolveRoot();
    }
    if (!this._mounted) {
      this.componentRegistry.buildComponentTree(this);
      this._mounted = true;
    }
  }
  addEventListener(type) {
    console.log("addEventListener ENTER", { hasBody: !!document.body, hasElem: !!this.elem });
    const g = window;
    if (g.__delphine_abort_controller) {
      g.__delphine_abort_controller.abort();
    }
    const ac = new AbortController();
    g.__delphine_abort_controller = ac;
    const { signal } = ac;
    console.log("Installing global debug listeners (reset+reinstall)");
    const root = this.elem;
    if (!root) return;
    if (this.elem) {
      root.addEventListener(
        type,
        (ev) => {
          const targetElem = ev.target;
          if (!targetElem) return;
          const form = this.findFormFromEventTarget(targetElem);
          if (!form) {
            console.log("No form resolved; event ignored");
            return;
          }
          const evType = ev.type;
          let t1 = targetElem.closest("[data-component]");
          while (t1) {
            const handlerName = t1.getAttribute(`data-on${evType}`);
            if (handlerName && handlerName !== "") {
              const name2 = t1.getAttribute("data-name");
              const sender = name2 ? form.componentRegistry.get(name2) ?? null : null;
              const maybeMethod = form[handlerName];
              if (typeof maybeMethod !== "function") {
                console.log("NOT A METHOD", handlerName);
                return;
              }
              maybeMethod.call(form, sender ?? form);
              return;
            }
            const name = t1.getAttribute("data-name");
            const comp = name ? form.componentRegistry.get(name) : null;
            const next = comp?.parent?.elem ?? null;
            t1 = next ?? t1.parentElement?.closest("[data-component]") ?? null;
          }
          console.log("Event not handled");
        },
        true
      );
    }
  }
};
__publicField(_TForm, "forms", /* @__PURE__ */ new Map());
var TForm = _TForm;
var TButton = class extends TComponent {
  constructor(name, parent, form) {
    super(name, parent, form);
  }
};
var ComponentTypeRegistry = class {
  constructor() {
    __publicField(this, "factories", /* @__PURE__ */ new Map());
  }
  registerType(typeName, factory) {
    this.factories.set(typeName, factory);
  }
  create(name, form, parent) {
    const f = this.factories.get(name);
    return f ? f(name, form, parent) : null;
  }
};
var TApplication = class {
  constructor() {
    __publicField(this, "forms", []);
    __publicField(this, "types", new ComponentTypeRegistry());
    __publicField(this, "mainForm", null);
  }
  createForm(ctor, name) {
    const f = new ctor(name);
    this.forms.push(f);
    if (!this.mainForm) this.mainForm = f;
    return f;
  }
  run() {
    this.runWhenDomReady(() => {
      if (this.mainForm) this.mainForm.show();
      else this.autoStart();
    });
  }
  autoStart() {
  }
  runWhenDomReady(fn) {
    if (document.readyState === "loading") {
      window.addEventListener("DOMContentLoaded", fn, { once: true });
    } else {
      fn();
    }
  }
};

// src/drt/plugins/PluginHost.ts
var PluginHost = class extends TComponent {
  constructor(name, form, parent) {
    super();
    __publicField(this, "instance", null);
    this.form = form;
    this.parent = parent;
  }
  mountPlugin(factory, props, services) {
    const container = this.htmlElement;
    if (!container) return;
    this.instance = factory.mount(container, props, services);
  }
  update(props) {
    this.instance?.update?.(props);
  }
  unmount() {
    this.instance?.unmount?.();
    this.instance = null;
  }
};

// examples/zaza/zaza.ts
function registerPluginTypes(reg) {
  reg.registerType("chartjs-pie", (name, form, parent) => {
    return new PluginHost(name, form, parent);
  });
  reg.registerType("vue-hello", (name, form, parent) => {
    return new PluginHost(name, form, parent);
  });
}
var Zaza = class extends TForm {
  // Form components - This list is auto generated by Delphine
  // ---------------
  //button1 : TButton = new TButton("button1", this, this);
  //button2 : TButton = new TButton("button2", this, this);
  //button3 : TButton = new TButton("button3", this, this);
  // ---------------
  constructor(name) {
    super(name);
  }
  //import { installDelphineRuntime } from "./drt";
  /*
  const runtime = {   
    handleClick({ element }: { element: Element }) {
      console.log("clicked!", element);
      //(element as HTMLElement).style.backgroundColor = "red";
    },
  }; 
  */
  button1_onclick() {
    const btn = this.componentRegistry.get("button1");
    if (!btn) {
      console.warn("button1 not found in registry");
      return;
    }
    this.componentRegistry.get("button1").color = TColor.rgb(255, 0, 0);
    console.log("Button1 clicked!!!!");
  }
  zaza_onclick() {
    this.componentRegistry.get("button1").color = TColor.rgb(0, 255, 0);
    console.log("zaza clicked!!!!");
  }
  //installDelphineRuntime(runtime);
};
var MyApplication = class extends TApplication {
  constructor() {
    super();
    __publicField(this, "zaza");
    this.zaza = new Zaza("zaza");
    this.mainForm = this.zaza;
  }
  run() {
    this.runWhenDomReady(() => {
      this.zaza.show();
    });
  }
};
var myApplication = new MyApplication();
myApplication.run();
export {
  registerPluginTypes
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL3ZjbC9TdGRDdHJscy50cyIsICIuLi9zcmMvZHJ0L3BsdWdpbnMvUGx1Z2luSG9zdC50cyIsICIuLi9leGFtcGxlcy96YXphL3phemEudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB0eXBlIHsgVUlQbHVnaW4sIEpzb24sIERlbHBoaW5lU2VydmljZXMgfSBmcm9tICcuLi9kcnQvVUlQbHVnaW4nO1xuXG5leHBvcnQgY2xhc3MgVENvbG9yIHtcbiAgICAgICAgczogc3RyaW5nO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHM6IHN0cmluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucyA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgLyogZmFjdG9yeSAqLyBzdGF0aWMgcmdiKHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIpOiBUQ29sb3Ige1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVENvbG9yKGByZ2IoJHtyfSwgJHtnfSwgJHtifSlgKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBmYWN0b3J5ICovIHN0YXRpYyByZ2JhKHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcik6IFRDb2xvciB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUQ29sb3IoYHJnYmEoJHtyfSwgJHtnfSwgJHtifSwgJHthfSlgKTtcbiAgICAgICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50UmVnaXN0cnkge1xuICAgICAgICBwcml2YXRlIGJ5TmFtZSA9IG5ldyBNYXA8c3RyaW5nLCBUQ29tcG9uZW50PigpO1xuXG4gICAgICAgIHJlZ2lzdGVyKG5hbWU6IHN0cmluZywgYzogVENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnlOYW1lLnNldChuYW1lLCBjKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdldDxUIGV4dGVuZHMgVENvbXBvbmVudCA9IFRDb21wb25lbnQ+KG5hbWU6IHN0cmluZyk6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ5TmFtZS5nZXQobmFtZSkgYXMgVCB8IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFyKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnlOYW1lLmNsZWFyKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlUm9vdCgpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgICAgICAgICAgLy8gUHJlZmVyIGJvZHkgYXMgdGhlIGNhbm9uaWNhbCByb290LlxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5Py5kYXRhc2V0Py5jb21wb25lbnQpIHJldHVybiBkb2N1bWVudC5ib2R5O1xuXG4gICAgICAgICAgICAgICAgLy8gQmFja3dhcmQgY29tcGF0aWJpbGl0eTogb2xkIHdyYXBwZXIgZGl2LlxuICAgICAgICAgICAgICAgIGNvbnN0IGxlZ2FjeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxwaGluZS1yb290Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGxlZ2FjeSkgcmV0dXJuIGxlZ2FjeTtcblxuICAgICAgICAgICAgICAgIC8vIExhc3QgcmVzb3J0LlxuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5ID8/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1aWxkQ29tcG9uZW50VHJlZShmb3JtOiBURm9ybSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAvLyByZXNvbHZlUm9vdCBlc3QgbWFpbnRlbmFudCBhcHBlbFx1MDBFOSBwYXIgVEZvcm06OnNob3coKS4gSW51dGlsZSBkZSBsZSBmYWlyZSBpY2lcbiAgICAgICAgICAgICAgICAvL2NvbnN0IHJvb3QgPSBURG9jdW1lbnQuYm9keTtcbiAgICAgICAgICAgICAgICAvL2NvbnN0IHJvb3QgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbHBoaW5lLXJvb3QnKSA/PyBkb2N1bWVudC5ib2R5KSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgICAgICAvL2NvbnN0IHJvb3QgPSAoZG9jdW1lbnQuYm9keT8ubWF0Y2hlcygnW2RhdGEtY29tcG9uZW50XScpID8gZG9jdW1lbnQuYm9keSA6IG51bGwpID8/IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVscGhpbmUtcm9vdCcpIGFzIEhUTUxFbGVtZW50IHwgbnVsbCkgPz8gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgICAgICAgICAvL2NvbnN0IHJvb3QgPSB0aGlzLnJlc29sdmVSb290KCk7XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0gRk9STSAtLS1cbiAgICAgICAgICAgICAgICAvLyBwcm92aXNvaXJlbWVudCBpZiAocm9vdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50JykgPT09ICdURm9ybScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKGZvcm0ubmFtZSwgZm9ybSk7XG4gICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdCA9IGZvcm0uZWxlbSE7XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0gQ0hJTEQgQ09NUE9ORU5UUyAtLS1cbiAgICAgICAgICAgICAgICByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbXBvbmVudF0nKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsID09PSByb290KSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXRpID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW9uY2xpY2snKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYHRpdGkgPSAke3RpdGl9YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb21wOiBUQ29tcG9uZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgc3dpdGNoIGlzIGp1c3QgZm9yIG5vdy4gSW4gdGhlIGZ1dHVyZSBpdCB3aWxsIG5vdCBiZSBuZWNlc3NhcnlcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdteS1idXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXAgPSBuZXcgVEJ1dHRvbihuYW1lISwgZm9ybSwgZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVscGhpbmUtcGx1Z2luJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbXAgPSBuZXcgUGx1Z2luSG9zdChuYW1lLCBmb3JtLCBmb3JtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wLmVsZW0gPSBlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlcihuYW1lISwgY29tcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycpO1xuICAgICAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUQ29tcG9uZW50IHtcbiAgICAgICAgcGFyZW50OiBUQ29tcG9uZW50IHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGZvcm06IFRGb3JtIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGNoaWxkcmVuOiBUQ29tcG9uZW50W10gPSBbXTtcblxuICAgICAgICBlbGVtOiBFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGdldCBodG1sRWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IG51bGwge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW0gYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBwYXJlbnQ6IFRDb21wb25lbnQgfCBudWxsLCBmb3JtOiBURm9ybSB8IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgICAgIHBhcmVudD8uY2hpbGRyZW4ucHVzaCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm0gPSBmb3JtO1xuICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBnZXQgY29sb3IoKTogVENvbG9yIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRDb2xvcih0aGlzLmdldFN0eWxlUHJvcCgnY29sb3InKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0IGNvbG9yKHY6IFRDb2xvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3R5bGVQcm9wKCdjb2xvcicsIHYucyk7XG4gICAgICAgIH1cblxuICAgICAgICBnZXQgYmFja2dyb3VuZENvbG9yKCk6IFRDb2xvciB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUQ29sb3IodGhpcy5nZXRTdHlsZVByb3AoJ2JhY2tncm91bmQtY29sb3InKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0IGJhY2tncm91bmRDb2xvcih2OiBUQ29sb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0eWxlUHJvcCgnYmFja2dyb3VuZC1jb2xvcicsIHYucyk7XG4gICAgICAgIH1cblxuICAgICAgICBnZXQgd2lkdGgoKTogbnVtYmVyIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5nZXRTdHlsZVByb3AoJ3dpZHRoJykpO1xuICAgICAgICB9XG4gICAgICAgIHNldCB3aWR0aCh2OiBudW1iZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0eWxlUHJvcCgnd2lkdGgnLCB2LnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLmdldFN0eWxlUHJvcCgnaGVpZ2h0JykpO1xuICAgICAgICB9XG4gICAgICAgIHNldCBoZWlnaHQodjogbnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdHlsZVByb3AoJ2hlaWdodCcsIHYudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBnZXQgb2Zmc2V0V2lkdGgoKTogbnVtYmVyIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odG1sRWxlbWVudCEub2Zmc2V0V2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0IG9mZnNldEhlaWdodCgpOiBudW1iZXIge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0bWxFbGVtZW50IS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRTdHlsZVByb3AobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5odG1sRWxlbWVudCEuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0U3R5bGVQcm9wKG5hbWU6IHN0cmluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0bWxFbGVtZW50IS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0UHJvcChuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWxFbGVtZW50IS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0UHJvcChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcyEuaHRtbEVsZW1lbnQhLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVERvY3VtZW50IHtcbiAgICAgICAgc3RhdGljIGRvY3VtZW50OiBURG9jdW1lbnQgPSBuZXcgVERvY3VtZW50KGRvY3VtZW50KTtcbiAgICAgICAgc3RhdGljIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gICAgICAgIGh0bWxEb2M6IERvY3VtZW50O1xuICAgICAgICBjb25zdHJ1Y3RvcihodG1sRG9jOiBEb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaHRtbERvYyA9IGh0bWxEb2M7XG4gICAgICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRGb3JtIGV4dGVuZHMgVENvbXBvbmVudCB7XG4gICAgICAgIHN0YXRpYyBmb3JtcyA9IG5ldyBNYXA8c3RyaW5nLCBURm9ybT4oKTtcbiAgICAgICAgcHJpdmF0ZSBfbW91bnRlZCA9IGZhbHNlO1xuICAgICAgICBjb21wb25lbnRSZWdpc3RyeTogQ29tcG9uZW50UmVnaXN0cnkgPSBuZXcgQ29tcG9uZW50UmVnaXN0cnkoKTtcbiAgICAgICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIobmFtZSwgbnVsbCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtID0gdGhpcztcbiAgICAgICAgICAgICAgICBURm9ybS5mb3Jtcy5zZXQobmFtZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgLy90aGlzLnBhcmVudCA9IHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvKiAgICAgICAgZmluZEZvcm1Gcm9tRXZlbnRUYXJnZXQoY3VycmVudFRhcmdldEVsZW06IEVsZW1lbnQpOiBURm9ybSB8IG51bGwge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1OYW1lID0gY3VycmVudFRhcmdldEVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtOiBURm9ybSA9IFRGb3JtLmZvcm1zLmdldChmb3JtTmFtZSEpITtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybTtcbiAgICAgICAgfVxuICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgLy8gRW5nbGlzaCBjb21tZW50cyBhcyByZXF1ZXN0ZWQuXG5cbiAgICAgICAgZmluZEZvcm1Gcm9tRXZlbnRUYXJnZXQodGFyZ2V0OiBFbGVtZW50KTogVEZvcm0gfCBudWxsIHtcbiAgICAgICAgICAgICAgICAvLyAxKSBGaW5kIHRoZSBuZWFyZXN0IGVsZW1lbnQgdGhhdCBsb29rcyBsaWtlIGEgZm9ybSBjb250YWluZXJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtRWxlbSA9IHRhcmdldC5jbG9zZXN0KCdbZGF0YS1jb21wb25lbnQ9XCJURm9ybVwiXVtkYXRhLW5hbWVdJykgYXMgRWxlbWVudCB8IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKCFmb3JtRWxlbSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgICAgICAvLyAyKSBSZXNvbHZlIHRoZSBURm9ybSBpbnN0YW5jZVxuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWZvcm1OYW1lKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgICAgIHJldHVybiBURm9ybS5mb3Jtcy5nZXQoZm9ybU5hbWUpID8/IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBzaG93KCkge1xuICAgICAgICAgICAgICAgIC8vIE11c3QgYmUgZG9uZSBiZWZvcmUgYnVpbGRDb21wb25lbnRUcmVlKCkgYmVjYXVzZSBgYnVpbGRDb21wb25lbnRUcmVlKClgIGRvZXMgbm90IGRvIGByZXNvbHZlUm9vdCgpYCBpdHNlbGYuXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbSA9IHRoaXMuY29tcG9uZW50UmVnaXN0cnkucmVzb2x2ZVJvb3QoKTsgLy8gb3UgdGhpcy5yZXNvbHZlUm9vdCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fbW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWdpc3RyeS5idWlsZENvbXBvbmVudFRyZWUodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBUT0RPXG4gICAgICAgIH1cblxuICAgICAgICBhZGRFdmVudExpc3RlbmVyKHR5cGU6IHN0cmluZykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhZGRFdmVudExpc3RlbmVyIEVOVEVSJywgeyBoYXNCb2R5OiAhIWRvY3VtZW50LmJvZHksIGhhc0VsZW06ICEhdGhpcy5lbGVtIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGcgPSB3aW5kb3cgYXMgYW55O1xuXG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgb2xkIGxpc3RlbmVycyAoaWYgYW55KVxuICAgICAgICAgICAgICAgIGlmIChnLl9fZGVscGhpbmVfYWJvcnRfY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZy5fX2RlbHBoaW5lX2Fib3J0X2NvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYWMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICAgICAgZy5fX2RlbHBoaW5lX2Fib3J0X2NvbnRyb2xsZXIgPSBhYztcbiAgICAgICAgICAgICAgICBjb25zdCB7IHNpZ25hbCB9ID0gYWM7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSW5zdGFsbGluZyBnbG9iYWwgZGVidWcgbGlzdGVuZXJzIChyZXNldCtyZWluc3RhbGwpJyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByb290ID0gdGhpcy5lbGVtO1xuICAgICAgICAgICAgICAgIGlmICghcm9vdCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgLy8gVm90cmUgaGFuZGxlciBzdXIgbGUgcm9vdFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuZ2xpc2ggY29tbWVudHMgYXMgcmVxdWVzdGVkLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFbmdsaXNoIGNvbW1lbnRzIGFzIHJlcXVlc3RlZC5cblxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZXY6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWxlbSA9IGV2LnRhcmdldCBhcyBFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldEVsZW0pIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLmZpbmRGb3JtRnJvbUV2ZW50VGFyZ2V0KHRhcmdldEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm9ybSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIGZvcm0gcmVzb2x2ZWQ7IGV2ZW50IGlnbm9yZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldlR5cGUgPSBldi50eXBlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZnJvbSB0aGUgY2xpY2tlZCBjb21wb25lbnQgKG9yIGFueSBjb21wb25lbnQgd3JhcHBlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdDE6IEVsZW1lbnQgfCBudWxsID0gdGFyZ2V0RWxlbS5jbG9zZXN0KCdbZGF0YS1jb21wb25lbnRdJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHQxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyTmFtZSA9IHQxLmdldEF0dHJpYnV0ZShgZGF0YS1vbiR7ZXZUeXBlfWApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGhhbmRsZXIgb24gdGhpcyBlbGVtZW50LCBkaXNwYXRjaCBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXJOYW1lICYmIGhhbmRsZXJOYW1lICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gdDEuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VuZGVyID0gbmFtZSA/IChmb3JtLmNvbXBvbmVudFJlZ2lzdHJ5LmdldChuYW1lKSA/PyBudWxsKSA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF5YmVNZXRob2QgPSAoZm9ybSBhcyBhbnkpW2hhbmRsZXJOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXliZU1ldGhvZCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOT1QgQSBNRVRIT0QnLCBoYW5kbGVyTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc2VuZGVyIGlzIG1pc3NpbmcsIGZhbGxiYWNrIHRvIHRoZSBmb3JtIGl0c2VsZiAoc2FmZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1heWJlTWV0aG9kIGFzICh0aGlzOiBURm9ybSwgc2VuZGVyOiBhbnkpID0+IGFueSkuY2FsbChmb3JtLCBzZW5kZXIgPz8gZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gaGFuZGxlciBoZXJlOiB0cnkgZ29pbmcgXCJ1cFwiIHVzaW5nIHlvdXIgY29tcG9uZW50IHRyZWUgaWYgcG9zc2libGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0MS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcCA9IG5hbWUgPyBmb3JtLmNvbXBvbmVudFJlZ2lzdHJ5LmdldChuYW1lKSA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZWZlciB5b3VyIFZDTC1saWtlIHBhcmVudCBjaGFpbiB3aGVuIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IGNvbXA/LnBhcmVudD8uZWxlbSA/PyBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjazogc3RhbmRhcmQgRE9NIHBhcmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdDEgPSBuZXh0ID8/IHQxLnBhcmVudEVsZW1lbnQ/LmNsb3Nlc3QoJ1tkYXRhLWNvbXBvbmVudF0nKSA/PyBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFdmVudCBub3QgaGFuZGxlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVEJ1dHRvbiBleHRlbmRzIFRDb21wb25lbnQge1xuICAgICAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHBhcmVudDogVENvbXBvbmVudCwgZm9ybTogVEZvcm0pIHtcbiAgICAgICAgICAgICAgICBzdXBlcihuYW1lLCBwYXJlbnQsIGZvcm0pO1xuICAgICAgICB9XG59XG5cbmV4cG9ydCB0eXBlIENvbXBvbmVudEZhY3RvcnkgPSAobmFtZTogc3RyaW5nLCBmb3JtOiBURm9ybSwgcGFyZW50OiBUQ29tcG9uZW50KSA9PiBUQ29tcG9uZW50O1xuXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50VHlwZVJlZ2lzdHJ5IHtcbiAgICAgICAgcHJpdmF0ZSBmYWN0b3JpZXMgPSBuZXcgTWFwPHN0cmluZywgQ29tcG9uZW50RmFjdG9yeT4oKTtcblxuICAgICAgICByZWdpc3RlclR5cGUodHlwZU5hbWU6IHN0cmluZywgZmFjdG9yeTogQ29tcG9uZW50RmFjdG9yeSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmFjdG9yaWVzLnNldCh0eXBlTmFtZSwgZmFjdG9yeSk7XG4gICAgICAgIH1cblxuICAgICAgICBjcmVhdGUobmFtZTogc3RyaW5nLCBmb3JtOiBURm9ybSwgcGFyZW50OiBUQ29tcG9uZW50KTogVENvbXBvbmVudCB8IG51bGwge1xuICAgICAgICAgICAgICAgIGNvbnN0IGYgPSB0aGlzLmZhY3Rvcmllcy5nZXQobmFtZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGYgPyBmKG5hbWUsIGZvcm0sIHBhcmVudCkgOiBudWxsO1xuICAgICAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUQXBwbGljYXRpb24ge1xuICAgICAgICBwcml2YXRlIGZvcm1zOiBURm9ybVtdID0gW107XG4gICAgICAgIHJlYWRvbmx5IHR5cGVzID0gbmV3IENvbXBvbmVudFR5cGVSZWdpc3RyeSgpO1xuICAgICAgICBtYWluRm9ybTogVEZvcm0gfCBudWxsID0gbnVsbDtcblxuICAgICAgICBjcmVhdGVGb3JtPFQgZXh0ZW5kcyBURm9ybT4oY3RvcjogbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gVCwgbmFtZTogc3RyaW5nKTogVCB7XG4gICAgICAgICAgICAgICAgY29uc3QgZiA9IG5ldyBjdG9yKG5hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybXMucHVzaChmKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubWFpbkZvcm0pIHRoaXMubWFpbkZvcm0gPSBmO1xuICAgICAgICAgICAgICAgIHJldHVybiBmO1xuICAgICAgICB9XG5cbiAgICAgICAgcnVuKCkge1xuICAgICAgICAgICAgICAgIHRoaXMucnVuV2hlbkRvbVJlYWR5KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1haW5Gb3JtKSB0aGlzLm1haW5Gb3JtLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5hdXRvU3RhcnQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBhdXRvU3RhcnQoKSB7XG4gICAgICAgICAgICAgICAgLy8gZmFsbGJhY2s6IGNob2lzaXIgdW5lIGZvcm0gZW5yZWdpc3RyXHUwMEU5ZSwgb3UgY3JcdTAwRTllciB1bmUgZm9ybSBpbXBsaWNpdGVcbiAgICAgICAgfVxuXG4gICAgICAgIHJ1bldoZW5Eb21SZWFkeShmbjogKCkgPT4gdm9pZCkge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZm4sIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZ1ZUNvbXBvbmVudCBleHRlbmRzIFRDb21wb25lbnQge31cblxuZXhwb3J0IGNsYXNzIFJlYWN0Q29tcG9uZW50IGV4dGVuZHMgVENvbXBvbmVudCB7fVxuXG5leHBvcnQgY2xhc3MgU3ZlbHRlQ29tcG9uZW50IGV4dGVuZHMgVENvbXBvbmVudCB7fVxuXG5leHBvcnQgY2xhc3MgUGx1Z2luSG9zdDxQcm9wcyBleHRlbmRzIEpzb24gPSBKc29uPiBleHRlbmRzIFRDb21wb25lbnQge1xuICAgICAgICBwcml2YXRlIHBsdWdpbjogVUlQbHVnaW48UHJvcHM+O1xuICAgICAgICBwcml2YXRlIHNlcnZpY2VzOiBEZWxwaGluZVNlcnZpY2VzO1xuICAgICAgICBwcml2YXRlIG1vdW50ZWQgPSBmYWxzZTtcblxuICAgICAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFVJUGx1Z2luPFByb3BzPiwgc2VydmljZXM6IERlbHBoaW5lU2VydmljZXMpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigndG90bycsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZXMgPSBzZXJ2aWNlcztcbiAgICAgICAgfVxuXG4gICAgICAgIG1vdW50KHByb3BzOiBQcm9wcykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vdW50ZWQpIHRocm93IG5ldyBFcnJvcignUGx1Z2luIGFscmVhZHkgbW91bnRlZCcpO1xuICAgICAgICAgICAgICAgIC8vdGhpcy5wbHVnaW4ubW91bnQodGhpcy5odG1sRWxlbWVudCwgcHJvcHMsIHRoaXMuc2VydmljZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGUocHJvcHM6IFByb3BzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1vdW50ZWQpIHRocm93IG5ldyBFcnJvcignUGx1Z2luIG5vdCBtb3VudGVkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlKHByb3BzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVubW91bnQoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1vdW50ZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51bm1vdW50KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgICAgIH1cbn1cbiIsICJpbXBvcnQgeyBUQ29tcG9uZW50LCBURm9ybSB9IGZyb20gJ0B2Y2wnO1xuaW1wb3J0IHR5cGUgeyBVSVBsdWdpbkluc3RhbmNlLCBVSVBsdWdpbkZhY3RvcnkgfSBmcm9tICcuLi9VSVBsdWdpbic7XG5cbi8vIEVuZ2xpc2ggY29tbWVudHMgYXMgcmVxdWVzdGVkLlxuZXhwb3J0IGNsYXNzIFBsdWdpbkhvc3QgZXh0ZW5kcyBUQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBpbnN0YW5jZTogVUlQbHVnaW5JbnN0YW5jZSB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgZm9ybTogVEZvcm0sIHBhcmVudDogVENvbXBvbmVudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5mb3JtID0gZm9ybTtcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAvLyB5b3UgbGlrZWx5IGFkZCB0aGlzIHRvIHBhcmVudCdzIGNoaWxkcmVuIGVsc2V3aGVyZVxuICB9XG5cbiAgbW91bnRQbHVnaW4oZmFjdG9yeTogVUlQbHVnaW5GYWN0b3J5LCBwcm9wczogYW55LCBzZXJ2aWNlczogYW55KSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5odG1sRWxlbWVudDtcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgdGhpcy5pbnN0YW5jZSA9IGZhY3RvcnkubW91bnQoY29udGFpbmVyLCBwcm9wcywgc2VydmljZXMpO1xuICB9XG5cbiAgdXBkYXRlKHByb3BzOiBhbnkpIHtcbiAgICB0aGlzLmluc3RhbmNlPy51cGRhdGU/Lihwcm9wcyk7XG4gIH1cblxuICB1bm1vdW50KCkge1xuICAgIHRoaXMuaW5zdGFuY2U/LnVubW91bnQ/LigpO1xuICAgIHRoaXMuaW5zdGFuY2UgPSBudWxsO1xuICB9XG59XG4iLCAiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbi8vaW1wb3J0IHsgaW5zdGFsbERlbHBoaW5lUnVudGltZSB9IGZyb20gXCIuL3NyYy9kcnRcIjsgLy8gPC0tIFRTLCBwYXMgLmpzXG5pbXBvcnQgeyBURm9ybSwgVENvbG9yLCBUQXBwbGljYXRpb24sIFRDb21wb25lbnQgfSBmcm9tICdAdmNsJztcbmltcG9ydCB7IENvbXBvbmVudFJlZ2lzdHJ5LCBDb21wb25lbnRUeXBlUmVnaXN0cnkgfSBmcm9tICdAdmNsJztcbmltcG9ydCB7IFBsdWdpbkhvc3QgfSBmcm9tICdAZHJ0L3BsdWdpbnMvUGx1Z2luSG9zdCc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclBsdWdpblR5cGVzKHJlZzogQ29tcG9uZW50VHlwZVJlZ2lzdHJ5KTogdm9pZCB7XG4gICAgICAgIC8vIEV4YW1wbGU6IGFueSB0eXBlIG5hbWUgY2FuIGJlIHByb3ZpZGVkIGJ5IGEgcGx1Z2luLlxuICAgICAgICByZWcucmVnaXN0ZXJUeXBlKCdjaGFydGpzLXBpZScsIChuYW1lOiBzdHJpbmcsIGZvcm06IFRGb3JtLCBwYXJlbnQ6IFRDb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBsdWdpbkhvc3QobmFtZSwgZm9ybSwgcGFyZW50KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVnLnJlZ2lzdGVyVHlwZSgndnVlLWhlbGxvJywgKG5hbWU6IHN0cmluZywgZm9ybTogVEZvcm0sIHBhcmVudDogVENvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGx1Z2luSG9zdChuYW1lLCBmb3JtLCBwYXJlbnQpO1xuICAgICAgICB9KTtcbn1cblxuY2xhc3MgWmF6YSBleHRlbmRzIFRGb3JtIHtcbiAgICAgICAgLy8gRm9ybSBjb21wb25lbnRzIC0gVGhpcyBsaXN0IGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IERlbHBoaW5lXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvL2J1dHRvbjEgOiBUQnV0dG9uID0gbmV3IFRCdXR0b24oXCJidXR0b24xXCIsIHRoaXMsIHRoaXMpO1xuICAgICAgICAvL2J1dHRvbjIgOiBUQnV0dG9uID0gbmV3IFRCdXR0b24oXCJidXR0b24yXCIsIHRoaXMsIHRoaXMpO1xuICAgICAgICAvL2J1dHRvbjMgOiBUQnV0dG9uID0gbmV3IFRCdXR0b24oXCJidXR0b24zXCIsIHRoaXMsIHRoaXMpO1xuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAgICAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBzdXBlcihuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvL2ltcG9ydCB7IGluc3RhbGxEZWxwaGluZVJ1bnRpbWUgfSBmcm9tIFwiLi9kcnRcIjtcblxuICAgICAgICAvKlxuY29uc3QgcnVudGltZSA9IHsgICBcbiAgaGFuZGxlQ2xpY2soeyBlbGVtZW50IH06IHsgZWxlbWVudDogRWxlbWVudCB9KSB7XG4gICAgY29uc29sZS5sb2coXCJjbGlja2VkIVwiLCBlbGVtZW50KTtcbiAgICAvLyhlbGVtZW50IGFzIEhUTUxFbGVtZW50KS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICB9LFxufTsgXG4qL1xuXG4gICAgICAgIGJ1dHRvbjFfb25jbGljaygpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidG4gPSB0aGlzLmNvbXBvbmVudFJlZ2lzdHJ5LmdldCgnYnV0dG9uMScpO1xuICAgICAgICAgICAgICAgIGlmICghYnRuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2J1dHRvbjEgbm90IGZvdW5kIGluIHJlZ2lzdHJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vYnRuLmNvbG9yID0gVENvbG9yLnJnYigwLCAwLCAyNTUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVnaXN0cnkuZ2V0KCdidXR0b24xJykhLmNvbG9yID0gVENvbG9yLnJnYigyNTUsIDAsIDApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdCdXR0b24xIGNsaWNrZWQhISEhJyk7XG4gICAgICAgIH1cblxuICAgICAgICB6YXphX29uY2xpY2soKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWdpc3RyeS5nZXQoJ2J1dHRvbjEnKSEuY29sb3IgPSBUQ29sb3IucmdiKDAsIDI1NSwgMCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3phemEgY2xpY2tlZCEhISEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vaW5zdGFsbERlbHBoaW5lUnVudGltZShydW50aW1lKTtcbn0gLy8gY2xhc3MgemF6YVxuXG5jbGFzcyBNeUFwcGxpY2F0aW9uIGV4dGVuZHMgVEFwcGxpY2F0aW9uIHtcbiAgICAgICAgemF6YTogWmF6YTtcblxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuemF6YSA9IG5ldyBaYXphKCd6YXphJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluRm9ybSA9IHRoaXMuemF6YTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJ1bigpIHtcbiAgICAgICAgICAgICAgICAvL3RoaXMuemF6YS5jb21wb25lbnRSZWdpc3RyeS5idWlsZENvbXBvbmVudFRyZWUodGhpcy56YXphKTtcbiAgICAgICAgICAgICAgICAvL3RoaXMuemF6YS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycpO1xuXG4gICAgICAgICAgICAgICAgLy8gYXUgbGFuY2VtZW50XG4gICAgICAgICAgICAgICAgdGhpcy5ydW5XaGVuRG9tUmVhZHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56YXphLnNob3coKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxufSAvLyBjbGFzcyBNeUFwcGxpY2F0aW9uXG5cbmNvbnN0IG15QXBwbGljYXRpb246IE15QXBwbGljYXRpb24gPSBuZXcgTXlBcHBsaWNhdGlvbigpO1xubXlBcHBsaWNhdGlvbi5ydW4oKTtcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7O0FBRU8sSUFBTSxTQUFOLE1BQU0sUUFBTztBQUFBLEVBR1osWUFBWSxHQUFXO0FBRnZCO0FBR1EsU0FBSyxJQUFJO0FBQUEsRUFDakI7QUFBQTtBQUFBLEVBQ2MsT0FBTyxJQUFJLEdBQVcsR0FBVyxHQUFt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MUQ7QUFBQSxFQUVBLE9BQU8sT0FBWTtBQUNqQixTQUFLLFVBQVUsU0FBUyxLQUFLO0FBQUEsRUFDL0I7QUFBQSxFQUVBLFVBQVU7QUFDUixTQUFLLFVBQVUsVUFBVTtBQUN6QixTQUFLLFdBQVc7QUFBQSxFQUNsQjtBQUNGOzs7QUN2Qk8sU0FBUyxvQkFBb0IsS0FBa0M7QUFFOUQsTUFBSSxhQUFhLGVBQWUsQ0FBQyxNQUFjLE1BQWEsV0FBdUI7QUFDM0UsV0FBTyxJQUFJLFdBQVcsTUFBTSxNQUFNLE1BQU07QUFBQSxFQUNoRCxDQUFDO0FBRUQsTUFBSSxhQUFhLGFBQWEsQ0FBQyxNQUFjLE1BQWEsV0FBdUI7QUFDekUsV0FBTyxJQUFJLFdBQVcsTUFBTSxNQUFNLE1BQU07QUFBQSxFQUNoRCxDQUFDO0FBQ1Q7QUFFQSxJQUFNLE9BQU4sY0FBbUIsTUFBTTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUWpCLFlBQVksTUFBYztBQUNsQixVQUFNLElBQUk7QUFBQSxFQUNsQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBWUEsa0JBQWtCO0FBQ1YsVUFBTSxNQUFNLEtBQUssa0JBQWtCLElBQUksU0FBUztBQUNoRCxRQUFJLENBQUMsS0FBSztBQUNGLGNBQVEsS0FBSywrQkFBK0I7QUFDNUM7QUFBQSxJQUNSO0FBRUEsU0FBSyxrQkFBa0IsSUFBSSxTQUFTLEVBQUcsUUFBUSxPQUFPLElBQUksS0FBSyxHQUFHLENBQUM7QUFDbkUsWUFBUSxJQUFJLHFCQUFxQjtBQUFBLEVBQ3pDO0FBQUEsRUFFQSxlQUFlO0FBQ1AsU0FBSyxrQkFBa0IsSUFBSSxTQUFTLEVBQUcsUUFBUSxPQUFPLElBQUksR0FBRyxLQUFLLENBQUM7QUFDbkUsWUFBUSxJQUFJLGtCQUFrQjtBQUFBLEVBQ3RDO0FBQUE7QUFHUjtBQUVBLElBQU0sZ0JBQU4sY0FBNEIsYUFBYTtBQUFBLEVBR2pDLGNBQWM7QUFDTixVQUFNO0FBSGQ7QUFJUSxTQUFLLE9BQU8sSUFBSSxLQUFLLE1BQU07QUFDM0IsU0FBSyxXQUFXLEtBQUs7QUFBQSxFQUM3QjtBQUFBLEVBRUEsTUFBTTtBQUtFLFNBQUssZ0JBQWdCLE1BQU07QUFDbkIsV0FBSyxLQUFLLEtBQUs7QUFBQSxJQUN2QixDQUFDO0FBQUEsRUFDVDtBQUNSO0FBRUEsSUFBTSxnQkFBK0IsSUFBSSxjQUFjO0FBQ3ZELGNBQWMsSUFBSTsiLAogICJuYW1lcyI6IFsibmFtZSJdCn0K
